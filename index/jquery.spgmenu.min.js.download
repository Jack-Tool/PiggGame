(function(){define(["jquery","/js/common/jquery.spg.headline.min.js","/js/common/modal.bg.min.js","/js/common/spg.common.js"],function(a){var h;a.fn.spgMenu=h=function(e){if("string"===typeof e){var g=Array.prototype.slice.call(arguments,1),d=this;this.each(function(){var b=a.data(this,"spgMenu"),c=b&&a.isFunction(b[e])?b[e].apply(b,g):b;if(c!==b&&void 0!==c)return d=c,!1});return d}return this.each(function(){var b=a.data(this,"spgMenu");b?(a.extend(!0,b.options,e),b.init()):a.data(this,"spgMenu",
new h.prototype.create(e,this))})};h.prototype={options:{dirName:"/img/common/spmenu/",visible:!1,handleEventName:"click",icons:[]},icons:[{str:"\u304a\u90e8\u5c4b",key:"mypage",url:"/"},{str:"\u307f\u3093\u306a\u306e\u30b3\u30fc\u30c7\u5e33",key:"areacoordinate",url:"/area/coordinate"},{str:"\u30d4\u30b0\u30de\u30c3\u30d7",key:"area",url:"/area"},{str:"\u304d\u305b\u304b\u3048",key:"dressup",url:"/dressup"},{str:"\u304d\u308d\u304f",key:"record",url:"/record/coordinate"},{str:"\u30d4\u30b0\u3068\u3082",
key:"friend",url:"/friend"},{str:"\u30b7\u30e7\u30c3\u30d7",key:"shop",url:"/shop"},{str:"\u30b0\u30c3\u30d4\u30b0\u5e33",key:"good",url:"/good"},{str:"\u304a\u3057\u3083\u3079\u308a",key:"chat",url:"/chat"},{str:"\u3058\u3083\u3093\u3051\u3093",key:"janken",url:"/janken"},{str:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb",key:"profile",url:"/profile"},{str:"\u8a2d\u5b9a",key:"config",url:"/config"}],deca_icons:[{str:"\u30db\u30fc\u30e0",key:"deca_menu-home",url:"https://www.ameba.jp/home"},{str:"\u30de\u30a4\u30a2\u30d7\u30ea",
key:"deca_menu-myappli",url:"https://www.ameba.jp/myapps"},{str:"\u30b2\u30fc\u30e0",key:"deca_menu-gametop",url:"https://www.ameba.jp/game"},{str:"\u305f\u3081\u308b",key:"deca_menu-cointop",url:"https://aw.mobadme.jp/?m_id=282"}],create:function(e,g){function d(){a("#wrapper").removeClass("spg-menuHeight");a("#spg-menu-view").hide();a("#spg-menu").trigger("hide").removeClass("spg-menu-open");a("#modal-bg").css("z-index","100");a("#modal-bg").removeClass("menu-modal");modalBg.elem.css("display",
"none")}this.element=a(g);this.options=a.extend(!0,{},this.options,e);a("#spg-menu").on(this.options.handleEventName,function(){var b=a("#spg-menu-view");b.toggle(0,function(){var c="block"!==b.css("display"),f=a("#spg-menu");c?(a("#wrapper").removeClass("spg-menuHeight"),f.removeClass("spg-menu-open"),a("#modal-bg").css("z-index","100"),d()):(AMB.track.action({name:"page",option:"menu",vars:{var1:location.pathname,var2:"menu"}}),AMB.track.action({name:"menu"}),a("#modal-bg").css("z-index","90"),
modalBg.show(),a("#modal-bg").addClass("menu-modal"),f.addClass("spg-menu-open"),a("#wrapper").addClass("spg-menuHeight"));f.trigger(!c?"show":"hide")})});a(document.body).on(this.options.handleEventName,function(b){"spg-menu"===a(b.target).attr("id")||0<a(b.target).closest("#spg-menu").length||0<a(b.target).closest("#spg-menu-view").length||a("#modal-bg").hasClass("menu-modal")&&d()}).on(this.options.handleEventName,"#spg-menu-view a",function(){d()}).on(this.options.handleEventName,"#spg-menu-close",
function(){d()});a(window).on("hashchange",function(){a("#modal-bg").hasClass("menu-modal")&&d()});this._createView();return this},init:function(){a("#spg-menu-view").remove();this._createView();return this},_createView:function(){function e(b,d,c){AMB.track.action({name:b,option:d},function(){location.href=a(c).attr("href")});return!1}function g(b,d){var c=a("<ul/>").attr({id:b});a(d).each(function(){a("<li/>").attr("class",this.key).append(a("<a/>").attr({"data-menuicon":this.key,href:this.url}).append(a("<span/>").text(this.str))).appendTo(c)});
return c}var d=this.options.visible?"show":"hide",b=a("<div/>").attr({id:"spg-menu-view"});a("span",this).html("(ID = '<b>"+this.id+"</b>')");var c=this;(function(){var f=g("spg-menu-main",c.icons);a(".spg-headerBarWrap").append(b.append(f)[d]());$viewObj=a("#spg-menu-view");f=a("<section/>").attr({id:"menuInfoLink"});a('<a href="/info" class="spg-right">\u904b\u55b6\u304b\u3089\u306e\u304a\u3057\u3089\u305b&#9654;</a>').appendTo(f);f.appendTo($viewObj);$amebaTitle=a("<p/>").text("Ameba\u306e\u30b2\u30fc\u30e0\u3067\u3082\u3063\u3068\u904a\u307c\u3046\uff01").attr({id:"spg-menu-ameba"});
$amebaTitle.appendTo($viewObj);g("spg-menu-deca",c.deca_icons).appendTo($viewObj);a("#spg-menu-deca > li > a").on("click",function(){var b=a(this).attr("data-menuicon");return e("kpi-tap",b,this)})})();return c}};h.prototype.create.prototype=h.prototype;a("#wrapper").spgMenu()})})();