(function(d,f,h){var l={html:'<div id="jsiSlideNotification" class="spg-slide-notification"><a id="jsiLinkContent"><div class="spg-slide-notification-inner"><div class="spg-slide-notification-icon"></div><div class="spg-slide-notification-count" id="jsiNotificationCount"></div><div class="spg-slide-notification-image"></div></div></a></div>',classes:{loginAme:"login",ame:"ame",stamp:"stamp",point:"point",pPoint:"ppoint"},animeClasses:{loginAme:"onBonusInfoAnimationMiddle",ame:"onBonusInfoAnimationMiddle",
stamp:"onBonusInfoAnimationLarge",point:"onBonusInfoAnimationLarge",pointMin:"onBonusInfoAnimationMiddle",pPoint:"onBonusInfoAnimationMiddle"},urls:{loginAme:"/campaign/getame",ame:"/campaign/getame",stamp:"http://link.ameba.jp/192358/",pPoint:"/campaign/ppoint"},modeMini:["mypagelogin"],top:"70%",extop:"54%",callback:d.noop};d.extend({spgSlideNotification:function(t){var m;function i(a){a.length&&("point"===a[0].type?p().then(function(c){if(c){c=d("#shPoint").length?d("#shPoint"):d("<div></div>",
{id:"shPoint",style:"display:none;"});c.html("");c.appendTo("body");var j=a[0],b;if(!(b=a[0].mode))a:{b=a[0].eventId;for(var e=0,g;g=l.modeMini[e];e++)if(-1<b.indexOf(g)){b="mini";break a}b="def"}j.mode=b;"mini"===a[0].mode?f.AGP.AGP_pointComplete.buildShortModule("shPoint",a[0].eventId):f.AGP.AGP_pointComplete.buildModule("shPoint",a[0].eventId);q(c)}else a.shift(),a.length&&i(a)}):r(a))}function r(a){l.html="point"===a[0].type?'<div class="spg-slide-notificationPoint '+a[0].mode+'" id="jsiSlideNotification"></div>':
'<div id="jsiSlideNotification" class="spg-slide-notification"><a id="jsiLinkContent"><div class="spg-slide-notification-inner"><div class="spg-slide-notification-icon"></div><div class="spg-slide-notification-count" id="jsiNotificationCount"></div><div class="spg-slide-notification-image"></div></div></a></div>';g=d(h.body);n=d(f);m=f.pageYOffset?f.pageYOffset:n.scrollTop();f.pageXOffset||n.scrollLeft();b=d.extend(!0,{},l,a[0].option);s=u();v.innerHTML=b.html;k=h.getElementById("jsiSlideNotification");
var c,j=400;a[0].mode?(c="mini"!==a[0].mode?o(b.extop,!1)+"px":o(b.top,!1)+"px",d(k).html(a[0].doms)):(c=o(b.top,!1)+"px",d("#jsiNotificationCount").text(a[0].count||0),d("#jsiLinkContent").attr({href:b.urls[a[0].type]||"#"}),d("#jsiSlideNotification").addClass(b.classes[a[0].type]));"undefined"!==typeof f.modalPriority&&f.modalPriority&&(j=98);d("#jsiSlideNotification").attr({style:"display: block; top:"+c+"; z-index:"+j+";"});g.css("overflow","hidden");k.addEventListener("webkitAnimationEnd",function(){g.css("overflow",
w);a.shift();if(a.length>0)i(a);else{k.removeEventListener("webkitAnimationEnd",arguments.callee,false);d("#jsiSlideNotification").attr({style:"display: none;"});b.callback&&b.callback();e=[];return false}},!1);a[0].mode&&"min"!==a[0].mode?d("#jsiSlideNotification").addClass(b.animeClasses.pointMin):d("#jsiSlideNotification").addClass(b.animeClasses[a[0].type])}function q(a,c){c=c||0;if(a.find(".AGP_pointComplete").length||a.find(".AGP_pointComplete_short").length){var d=a.find(".AGP_tools");e[0].doms=
d.clone();r(e)}else 5>c?setTimeout(function(){c++;q(a,c)},500):(e.shift(),e.length&&i(e))}function p(a,c){var c=c||d.Deferred(),a=a||0,b;b=AGP?AGP.options.asId?!0:!1:!1;!b&&5>a?setTimeout(function(){a++;p(a,c)},500):c.resolve(b);return c}function u(){var a=d(b.html),c={height:d(b.html).outerHeight({margin:!0})};c.height||(a=a.css({position:"absolute",top:0,display:"block"}).appendTo(g),c={height:a.outerHeight({margin:!0})},a.remove());return c}function o(a,c){var b=f.innerHeight?f.innerHeight:d(f).height(),
e=a;/px$/.test(e)?e=parseInt(a.replace("px","")):/%$/.test(e)&&(e=b*parseInt(a.replace("%",""))/100);return c?m+b-e-s.height:m+e}var g=d(h.body),n=d(f),b,s,e=[];d('<div id="jsiSlideAnimeContent" style="display: block; width: auto; height: auto;"></div>').appendTo(g);var v=h.getElementById("jsiSlideAnimeContent"),k,w=g.css("overflow");(function(a){if(a.length){for(var c=0,b;b=a[c];c++)"point"===b.type?e.unshift(b):e.push(b);i(e)}})(t)}})})(jQuery,window,document);